# Projeto SaaS

Este é um projeto SaaS que utiliza Node.js e Express para fornecer uma API RESTful. A aplicação gerencia autenticação de usuários, Empresas (tenants) e permissões de acesso.

## Funcionalidades por Plano

**BASICO**

- `Quantidade Funcionários` 15 Pessoas.
- `Vendas` Menu de Vendas.
  - `REGISTRAR_VENDAS`
  - `LISTAR_VENDAS`
  - `ALTERAR_VENDAS`
- `Compras` Menu de Compras.
  - `REGISTRAR_COMPRAS`
  - `LISTAR_COMPRAS`
  - `ALTERAR_COMPRAS`
- `Funcionário` Área para cadastrar/gerir funcionários.
  - `CADASTRAR_FUNCIONARIOS`
  - `LISTAR_FUNCIONARIOS`
  - `ALTERAR_FUNCIONARIOS`
  - `REMOVER_FUNCIONARIO`
- `Produtos` Área de gestão dos produtos.
  - `CADASTRAR_PRODUTOS`
  - `LISTAR_PRODUTOS`
  - `ALTERAR_PRODUTOS`
  - `ALTERAR_CATEGORIAS`
  - `REMOVER_PRODUTOS`
- `Comissões` Área para visualização/pagamento de comissões.
  - `LISTAR_COMISSOES`
  - `ALTERAR_COMISSOES`
  - `PAGAR_COMISSOES`
  - `REMOVER_COMISSOES`
- `Cadastro Webhooks Discord` Área para cadastrar Webhooks discord.
  - `CADASTRAR_WEBHOOKS`
  - `LISTAR_WEBHOOKS`
  - `ALTERAR_WEBHOOKS`
  - `REMOVER_WEBHOOKS`
- `Histórico Pagamentos/Compras/Vendas` Área para visualização dos últimas Pagamentos/Compras/Vendas.
  - `LISTAR_HISTORICO`
  - `ALTERAR_WEBHOOKS`
  - `REMOVER_HISTORICO`

**INTERMEDIARIO**

- `Quantidade Funcionários` 30 Pessoas.
- `Plano Basico` Contem todas funcionalidades do plano BASICO.
- `Gestão de Ponto` Toda gestão de ponto do funcionário.
- `Tabelas de Preço` Toda gestão de tabelas de preço customizadas.
- `Cadastro de Grupos (aliados/parcerias)` Toda gestão de grupos.
- `Clientes` Gestão de clientes.
  **AVANCADO**

- `Quantidade Funcionários` 60 Pessoas.
- `Plano Intermediario` Contem todas funcionalidades do plano INTERMEDIARIO.
- `Bau` Gestão e Organização de controle de Bau.
- `Cargos` Gestão de cargos.
- `Eventos` Gestão de eventos.
- `Rifas` Gestão de Rifas (bilhete, sorteio, vendedores, compradores).
- `Bingo` Gestão de Bingo (cartelas, sorteio, vendedores, compradores).
- `Loteria` Gestão de Loteria (bilhete, sorteio, vendedores, compradores, acumulação).

## URL Base

A URL base para acessar a API é: `https://projetosaas-y6vmba4x.b4a.run`

## Endpoints

### Autenticação

**Registrar Usuário**

- **URL:** `/auth/register`
- **Método:** `POST`
- **Descrição:** Registra um novo usuário.
- **Entradas:**
  - `username` (string): Nome de usuário.
  - `password` (string): Senha do usuário.
  - `email` (string): Email do usuário.
  - `telefone` (string): Telefone do usuário.
  - `nickname` (string, opcional): Apelido do usuário.

**Login**

- **URL:** `/auth/login`
- **Método:** `POST`
- **Descrição:** Autentica um usuário e retorna um token JWT.
- **Entradas:**
  - `username` (string): Nome de usuário.
  - `password` (string): Senha do usuário.

### Permissões

**Criar Permissão**

- **URL:** `/permissions/create`
- **Método:** `POST`
- **Descrição:** Cria uma nova permissão.
- **Entradas:**
  - `nome` (string): Nome da permissão.

### Funções

**Criar Função**

- **URL:** `/roles/`
- **Método:** `POST`
- **Descrição:** Cria uma nova função.
- **Entradas:**
  - `name` (string): Nome da função.
  - `description` (string): Descrição da função.

**Atualizar Função**

- **URL:** `/roles/:id`
- **Método:** `PUT`
- **Descrição:** Atualiza uma função existente.
- **Entradas:**
  - `name` (string): Nome da função.
  - `description` (string): Descrição da função.

**Obter Função por Nome**

- **URL:** `/roles/name/:name`
- **Método:** `GET`
- **Descrição:** Obtém uma função pelo nome.

**Obter Função por ID**

- **URL:** `/roles/id/:id`
- **Método:** `GET`
- **Descrição:** Obtém uma função pelo ID.

**Listar Todas as Funções**

- **URL:** `/roles/`
- **Método:** `GET`
- **Descrição:** Lista todas as funções.

### Produtos

**Criar Produto**

- **URL:** `/products`
- **Método:** `POST`
- **Descrição:** Cria um novo produto.
- **Entradas:**
  - `name` (string): Nome do produto.
  - `description` (string): Descrição do produto.

**Atualizar Produto**

- **URL:** `/products/:productID`
- **Método:** `PUT`
- **Descrição:** Atualiza um produto existente.
- **Entradas:**
  - `name` (string): Nome do produto.
  - `description` (string): Descrição do produto.

**Obter Produto por Nome**

- **URL:** `/products/:name`
- **Método:** `GET`
- **Descrição:** Obtém um produto pelo nome.

### Tenants

**Selecionar Tenant**

- **URL:** `/tenant/select/:tenantID`
- **Método:** `POST`
- **Descrição:** Seleciona um Tenant para o usuário autenticado.
- **Entradas:**
  - `tenantID` (string): ID do Tenant.

**Adicionar Usuário ao Tenant**

- **URL:** `/tenant/addUser/:userID/:tenantID/:role`
- **Método:** `POST`
- **Descrição:** Adiciona um usuário a um Tenant com um papel específico.
- **Entradas:**
  - `userID` (string): ID do usuário.
  - `tenantID` (string): ID do Tenant.
  - `role` (string): Papel do usuário no Tenant.

**Criar Tenant**

- **URL:** `/tenant/create`
- **Método:** `POST`
- **Descrição:** Cria um novo Tenant.
- **Entradas:**
  - `name` (string): Nome do Tenant.
  - `usuario_responsavel` (string): Usuário responsável.
  - `subscription_level` (string, opcional): Nível de assinatura.
  - `email` (string): Email do Tenant.
  - `servidor` (string): Servidor do Tenant.

**Listar Tenants**

- **URL:** `/tenant/list`
- **Método:** `GET`
- **Descrição:** Lista todos os Tenants.

**Obter Tenant por ID**

- **URL:** `/tenant/:id`
- **Método:** `GET`
- **Descrição:** Obtém informações de um Tenant pelo ID.

**Obter Tenant por Nome**

- **URL:** `/tenant/name/:tenantName`
- **Método:** `GET`
- **Descrição:** Obtém informações de um Tenant pelo nome.

## Instalação

1. Clone o repositório.
2. Instale as dependências com `npm install`.
3. Configure as variáveis de ambiente no arquivo `.env`.
4. Inicie o servidor com `npm start`.

## Docker

Para rodar a aplicação usando Docker:

1. Construa a imagem Docker: `docker build -t projeto-saas .`
2. Rode o contêiner: `docker run -p 3000:3000 projeto-saas`
